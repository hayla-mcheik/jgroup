import{_ as y,u as w,r as l,f as _,h as k,c as u,a as o,m as B,B as d,C as c,k as a,o as m,P as S}from"#entry";import{u as A}from"./DKK_hmHz.js";import{u as $}from"./CkYd1NOj.js";const C={class:"bg-white rounded-lg shadow p-6"},E={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},F={class:"flex justify-end"},M=["disabled"],T={key:0},V={key:1},j={__name:"about",setup(D){const f=A(),n=$();w({title:"About"}),l(null);const r=l(!1),s=l({description:"",mission:"",vision:""}),b=_(),g=b.public.apiBase||"http://127.0.0.1:8000",v=b.public.mediaBase||"http://127.0.0.1:8000",p=async()=>{try{const t=await $fetch(`${g}/about`,{method:"GET"});if(console.log(t),t?.about){const e=t.about;s.value={description:e.description||"",mission:e.mission||"",vision:e.vision||""}}}catch(t){console.error("Error fetching about:",t),n.add({title:"error",description:"Failed to fetch about data",color:"error"})}},x=async()=>{r.value=!0;try{const t=new FormData;Object.keys(s.value).forEach(i=>{i!=="image"&&i!=="imagePreview"&&s.value[i]!==null&&t.append(i,s.value[i])}),(s.value.image instanceof File||typeof s.value.image=="string")&&t.append("image",s.value.image);const e=await $fetch(`${g}/about`,{method:"POST",body:t,headers:{Authorization:`Bearer ${f.token}`}});console.log(e),e.data&&(s.value.image=e.image,s.value.imagePreview=e.image?`${v}${e.image}`:null,n.add({title:"Success",description:"About updated successfully.",color:"success"}),console.log("Saved data:",e.data))}catch(t){console.error("Error saving about:",t),t.response?.status===401&&(await f.logout(),S("/admin/login")),n.add({title:"error",description:"Failed to update about",color:"error"})}finally{r.value=!1}},h=()=>{p()};return k(()=>{p()}),(t,e)=>(m(),u("div",null,[e[6]||(e[6]=o("div",{class:"flex justify-between items-center mb-6"},[o("h1",{class:"text-2xl font-bold text-gray-800"},"About Management")],-1)),o("div",C,[o("form",{onSubmit:B(x,["prevent"]),class:"space-y-6"},[o("div",null,[e[3]||(e[3]=o("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),d(o("textarea",{"onUpdate:modelValue":e[0]||(e[0]=i=>a(s).description=i),id:"description",rows:"4",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[c,a(s).description]])]),o("div",E,[o("div",null,[e[4]||(e[4]=o("label",{for:"mission",class:"block text-sm font-medium text-gray-700"},"Mission",-1)),d(o("textarea",{"onUpdate:modelValue":e[1]||(e[1]=i=>a(s).mission=i),id:"mission",rows:"3",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[c,a(s).mission]])]),o("div",null,[e[5]||(e[5]=o("label",{for:"vision",class:"block text-sm font-medium text-gray-700"},"Vision",-1)),d(o("textarea",{"onUpdate:modelValue":e[2]||(e[2]=i=>a(s).vision=i),id:"vision",rows:"3",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[c,a(s).vision]])])]),o("div",F,[o("button",{type:"button",onClick:h,class:"mr-3 bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Reset "),o("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:a(r)},[a(r)?(m(),u("span",T,"Saving...")):(m(),u("span",V,"Save Changes"))],8,M)])],32)])]))}},R=y(j,[["__scopeId","data-v-7b512e0b"]]);export{R as default};
