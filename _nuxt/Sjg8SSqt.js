import{_ as C,u as T,r as d,f as $,h as j,c as n,a as o,m as A,B as m,C as f,k as s,o as a,P as H}from"#entry";import{u as I}from"./DKK_hmHz.js";import{u as S}from"./CkYd1NOj.js";const U={class:"bg-white rounded-lg shadow p-6"},V={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},M={class:"mt-1 flex items-center"},R={key:0,class:"inline-block h-12 w-12 rounded-full overflow-hidden bg-gray-100"},D=["src"],E={class:"mt-1 flex items-center"},z={key:0,class:"inline-block h-12 w-12 rounded-full overflow-hidden bg-gray-100"},L=["src"],O={class:"flex justify-end"},G=["disabled"],N={key:0},q={key:1},J={__name:"HeroBanner",setup(K){const g=I(),u=S();T({title:"Hero Banner"});const v=d(null),b=d(null),r=d(!1),t=d({titleone:"",titletwo:"",titlethree:"",image:null,imagePreview:null,video:null,videoPreview:null}),p=$(),h=p.public.apiBase||"http://127.0.0.1:8000",w=p.public.mediaBase||"http://127.0.0.1:8000",y=async()=>{try{const l=await $fetch(`${h}/herobanner`,{method:"GET"});if(console.log(l),l?.herobanner){const e=l.herobanner;t.value={titleone:e.titleone||"",titletwo:e.titletwo||"",titlethree:e.titlethree||"",image:typeof t.value.image=="object"?t.value.image:e.image,imagePreview:e.image?e.image:null,video:typeof t.value.video=="object"?t.value.video:e.video,videoPreview:e.video?e.video:null}}}catch(l){console.error("Error fetching herobanner:",l),u.add({title:"error",description:"Failed to fetch herobanner data",color:"error"})}},x=async()=>{r.value=!0;try{const l=new FormData;Object.keys(t.value).forEach(i=>{i!=="image"&&i!=="imagePreview"&&i!=="video"&&i!=="videoPreview"&&t.value[i]!==null&&l.append(i,t.value[i])}),(t.value.image instanceof File||typeof t.value.image=="string")&&l.append("image",t.value.image),(t.value.video instanceof File||typeof t.value.video=="string")&&l.append("video",t.value.video);const e=await $fetch(`${h}/herobanner`,{method:"POST",body:l,headers:{Authorization:`Bearer ${g.token}`}});console.log(e),e.data&&(t.value.image=e.image,t.value.imagePreview=e.image?`${w}${e.image}`:null,t.value.video=e.video,t.value.videoPreview=e.video?`${w}${e.video}`:null,u.add({title:"Success",description:"Hero Banner updated successfully.",color:"success"}),console.log("Saved data:",e.data))}catch(l){console.error("Error saving Hero Banner:",l),l.response?.status===401&&(await g.logout(),H("/admin/login")),u.add({title:"error",description:"Failed to update hero banner",color:"error"})}finally{r.value=!1}},k=()=>{v.value.click()},B=()=>{b.value.click()},_=l=>{const e=l.target.files[0];if(e){const i=new FileReader;i.onload=c=>{t.value={...t.value,image:e,imagePreview:c.target.result}},i.readAsDataURL(e)}},F=l=>{const e=l.target.files[0];if(e){const i=new FileReader;i.onload=c=>{t.value={...t.value,video:e,videoPreview:c.target.result}},i.readAsDataURL(e)}},P=()=>{y()};return j(()=>{y()}),(l,e)=>(a(),n("div",null,[e[10]||(e[10]=o("div",{class:"flex justify-between items-center mb-6"},[o("h1",{class:"text-2xl font-bold text-gray-800"},"Hero Banner Management")],-1)),o("div",U,[o("form",{onSubmit:A(x,["prevent"]),class:"space-y-6"},[o("div",V,[o("div",null,[e[3]||(e[3]=o("label",{for:"titleone",class:"block text-sm font-medium text-gray-700"},"Title One",-1)),m(o("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>s(t).titleone=i),type:"text",id:"titleone",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[f,s(t).titleone]])]),o("div",null,[e[4]||(e[4]=o("label",{for:"titletwo",class:"block text-sm font-medium text-gray-700"},"Title Two",-1)),m(o("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>s(t).titletwo=i),type:"text",id:"titletwo",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[f,s(t).titletwo]])]),o("div",null,[e[5]||(e[5]=o("label",{for:"titlethree",class:"block text-sm font-medium text-gray-700"},"Title Three",-1)),m(o("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>s(t).titlethree=i),type:"text",id:"titlethree",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[f,s(t).titlethree]])])]),o("div",null,[e[7]||(e[7]=o("label",{class:"block text-sm font-medium text-gray-700"}," Image",-1)),o("div",M,[s(t).image?(a(),n("img",{key:1,src:s(t).image,class:"h-32 w-auto object-cover rounded"},null,8,D)):(a(),n("span",R,[...e[6]||(e[6]=[o("svg",{class:"h-full w-full text-gray-300",fill:"currentColor",viewBox:"0 0 24 24"},[o("path",{d:"M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"})],-1)])])),o("button",{type:"button",onClick:k,class:"ml-5 bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Change "),o("input",{ref_key:"imageFileInput",ref:v,type:"file",class:"hidden",accept:"image/*",onChange:_},null,544)])]),o("div",null,[e[9]||(e[9]=o("label",{class:"block text-sm font-medium text-gray-700"},"Video",-1)),o("div",E,[s(t).video?(a(),n("video",{key:1,src:s(t).video,controls:"",class:"h-32 w-auto object-cover rounded"},null,8,L)):(a(),n("span",z,[...e[8]||(e[8]=[o("svg",{class:"h-full w-full text-gray-300",fill:"currentColor",viewBox:"0 0 24 24"},[o("path",{d:"M22.95 7.05L16.29 2.11A1 1 0 0015 2.8v4.2a1 1 0 00-1 1v6a1 1 0 001 1v4.2a1 1 0 001.29.69l6.66-4.94a1 1 0 000-1.6z"})],-1)])])),o("button",{type:"button",onClick:B,class:"ml-5 bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Change "),o("input",{ref_key:"videoFileInput",ref:b,type:"file",class:"hidden",accept:"video/*",onChange:F},null,544)])]),o("div",O,[o("button",{type:"button",onClick:P,class:"mr-3 bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Reset "),o("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:s(r)},[s(r)?(a(),n("span",N,"Saving...")):(a(),n("span",q,"Save Changes"))],8,G)])],32)])]))}},Y=C(J,[["__scopeId","data-v-2e4a92f1"]]);export{Y as default};
