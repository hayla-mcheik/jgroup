import{_ as k}from"./-mxyazPf.js";import{r,c as a,a as t,b as m,m as C,B as x,C as v,w as p,T as y,d as b,e as S,o as n,j as h,t as T,f as B}from"#entry";import{u as V}from"./CSrAqISc.js";import{_ as j}from"./DlAUqK2U.js";const L={class:"flex items-center justify-center min-h-screen p-4 bg-gradient-to-br from-indigo-500 to-purple-600"},N={class:"relative w-full max-w-md p-8 bg-white rounded-xl shadow-2xl transition-all duration-300 ease-in-out transform hover:scale-[1.01] sm:p-10"},A={class:"mt-1"},P={class:"mt-1"},R=["disabled"],D={key:0,class:"flex items-center space-x-2"},I={key:1},M={key:0,class:"p-4 mt-6 text-sm text-red-700 border border-red-200 rounded-lg bg-red-100"},q={key:0,class:"p-4 mt-6 text-sm text-green-700 border border-green-200 rounded-lg bg-green-100"},z={class:"mt-4 text-sm text-center text-gray-500 dark:text-gray-400"},E={__name:"login",setup(O){const w=V(),g=S(),i=r(""),d=r(""),o=r(""),l=r(!1),u=r(!1),_=async()=>{o.value="",l.value=!0,u.value=!1;const{public:f}=B();try{const e=await fetch(`${f.apiBase}/login`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:i.value,password:d.value})}),s=await e.json();e.ok?(w.setAuthToken(s.token),u.value=!0,console.log("Login successful. Token:",s.token),s.role==1?g.push("/admin/dashboard"):g.push("/dashboard")):s.message?o.value=s.message:o.value="Failed to log in. Please check your credentials."}catch(e){console.error("Login error:",e),o.value="An unexpected error occurred. Please try again later."}finally{l.value=!1}};return(f,e)=>{const s=k;return n(),a("div",L,[t("div",N,[e[8]||(e[8]=t("div",{class:"mb-8 text-center"},[t("h2",{class:"text-4xl font-extrabold tracking-tight text-gray-900"}," Welcome Back "),t("p",{class:"mt-2 text-sm text-gray-500"},"Sign in to your dashboard")],-1)),t("form",{onSubmit:C(_,["prevent"]),class:"space-y-6"},[t("div",null,[e[2]||(e[2]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email address",-1)),t("div",A,[x(t("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=c=>i.value=c),type:"email",required:"",class:"w-full px-4 py-2 text-gray-900 placeholder-gray-400 transition-colors duration-200 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"you@example.com"},null,512),[[v,i.value]])])]),t("div",null,[e[3]||(e[3]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Password",-1)),t("div",P,[x(t("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=c=>d.value=c),type:"password",required:"",class:"w-full px-4 py-2 text-gray-900 placeholder-gray-400 transition-colors duration-200 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"••••••••"},null,512),[[v,d.value]])])]),t("button",{type:"submit",class:"flex justify-center w-full px-4 py-3 text-sm font-semibold text-white transition-all duration-300 rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 bg-indigo-600",disabled:l.value},[l.value?(n(),a("span",D,[...e[4]||(e[4]=[t("svg",{class:"w-5 h-5 text-white animate-spin",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),t("span",null,"Logging in...",-1)])])):(n(),a("span",I,"Sign In"))],8,R)],32),m(y,{name:"fade"},{default:p(()=>[o.value?(n(),a("div",M,[t("p",null,T(o.value),1)])):h("",!0)]),_:1}),m(y,{name:"fade"},{default:p(()=>[u.value?(n(),a("div",q,[...e[5]||(e[5]=[t("p",null,"Login successful! Redirecting...",-1)])])):h("",!0)]),_:1}),t("div",z,[e[7]||(e[7]=b(" Don't have an account? ",-1)),m(s,{to:"/register",class:"font-medium text-blue-600 hover:text-blue-500"},{default:p(()=>[...e[6]||(e[6]=[b(" Register here ",-1)])]),_:1})])])])}}},W=j(E,[["__scopeId","data-v-2c285c22"]]);export{W as default};
