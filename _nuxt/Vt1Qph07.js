import{u as y,r as l,f as w,h as _,c as u,a as e,m as k,B as d,C as m,k as a,o as c,P as B}from"#entry";import{u as S}from"./CSrAqISc.js";import{u as A}from"./CkYd1NOj.js";import{_ as $}from"./DlAUqK2U.js";const C={class:"bg-white rounded-lg shadow p-6"},E={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},F={class:"flex justify-end"},M=["disabled"],T={key:0},V={key:1},j={__name:"about",setup(D){const f=S(),n=A();y({title:"About"}),l(null);const r=l(!1),s=l({description:"",mission:"",vision:""}),b=w(),g=b.public.apiBase||"http://127.0.0.1:8000",v=b.public.mediaBase||"http://127.0.0.1:8000",p=async()=>{try{const t=await $fetch(`${g}/about`,{method:"GET"});if(console.log(t),t?.about){const o=t.about;s.value={description:o.description||"",mission:o.mission||"",vision:o.vision||""}}}catch(t){console.error("Error fetching about:",t),n.add({title:"error",description:"Failed to fetch about data",color:"error"})}},x=async()=>{r.value=!0;try{const t=new FormData;Object.keys(s.value).forEach(i=>{i!=="image"&&i!=="imagePreview"&&s.value[i]!==null&&t.append(i,s.value[i])}),(s.value.image instanceof File||typeof s.value.image=="string")&&t.append("image",s.value.image);const o=await $fetch(`${g}/about`,{method:"POST",body:t,headers:{Authorization:`Bearer ${f.token}`}});console.log(o),o.data&&(s.value.image=o.image,s.value.imagePreview=o.image?`${v}${o.image}`:null,n.add({title:"Success",description:"About updated successfully.",color:"success"}),console.log("Saved data:",o.data))}catch(t){console.error("Error saving about:",t),t.response?.status===401&&(await f.logout(),B("/admin/login")),n.add({title:"error",description:"Failed to update about",color:"error"})}finally{r.value=!1}},h=()=>{p()};return _(()=>{p()}),(t,o)=>(c(),u("div",null,[o[6]||(o[6]=e("div",{class:"flex justify-between items-center mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-800"},"About Management")],-1)),e("div",C,[e("form",{onSubmit:k(x,["prevent"]),class:"space-y-6"},[e("div",null,[o[3]||(o[3]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),d(e("textarea",{"onUpdate:modelValue":o[0]||(o[0]=i=>a(s).description=i),id:"description",rows:"4",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[m,a(s).description]])]),e("div",E,[e("div",null,[o[4]||(o[4]=e("label",{for:"mission",class:"block text-sm font-medium text-gray-700"},"Mission",-1)),d(e("textarea",{"onUpdate:modelValue":o[1]||(o[1]=i=>a(s).mission=i),id:"mission",rows:"3",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[m,a(s).mission]])]),e("div",null,[o[5]||(o[5]=e("label",{for:"vision",class:"block text-sm font-medium text-gray-700"},"Vision",-1)),d(e("textarea",{"onUpdate:modelValue":o[2]||(o[2]=i=>a(s).vision=i),id:"vision",rows:"3",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[m,a(s).vision]])])]),e("div",F,[e("button",{type:"button",onClick:h,class:"mr-3 bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Reset "),e("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:a(r)},[a(r)?(c(),u("span",T,"Saving...")):(c(),u("span",V,"Save Changes"))],8,M)])],32)])]))}},z=$(j,[["__scopeId","data-v-7b512e0b"]]);export{z as default};
