import{u as _,r as d,f as B,h as k,c as i,a,m as F,B as C,C as P,k as r,o as n,P as S}from"#entry";import{u as $}from"./CSrAqISc.js";import{u as j}from"./CkYd1NOj.js";import{_ as A}from"./DlAUqK2U.js";const H={class:"bg-white rounded-lg shadow p-6"},I={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},M={class:"mt-1 flex items-center"},D={key:0,class:"inline-block h-12 w-12 rounded-full overflow-hidden bg-gray-100"},E=["src"],T={class:"flex justify-end"},R=["disabled"],U={key:0},z={key:1},V={__name:"abouthome",setup(O){const c=$(),u=j();_({title:"Hero Banner"});const m=d(null);d(null);const l=d(!1),o=d({description:"",image:null,imagePreview:null}),g=B(),f=g.public.apiBase||"http://127.0.0.1:8000",v=g.public.mediaBase||"http://127.0.0.1:8000",p=async()=>{try{const t=await $fetch(`${f}/abouthome`,{method:"GET"});if(console.log(t),t?.herobanner){const e=t.herobanner;o.value={description:e.description||"",image:typeof o.value.image=="object"?o.value.image:e.image,imagePreview:e.image?e.image:null}}}catch(t){console.error("Error fetching herobanner:",t),u.add({title:"error",description:"Failed to fetch herobanner data",color:"error"})}},b=async()=>{l.value=!0;try{const t=new FormData;Object.keys(o.value).forEach(s=>{s!=="image"&&s!=="imagePreview"&&s!=="video"&&s!=="videoPreview"&&o.value[s]!==null&&t.append(s,o.value[s])}),(o.value.image instanceof File||typeof o.value.image=="string")&&t.append("image",o.value.image),(o.value.video instanceof File||typeof o.value.video=="string")&&t.append("video",o.value.video);const e=await $fetch(`${f}/abouthome`,{method:"POST",body:t,headers:{Authorization:`Bearer ${c.token}`}});console.log(e),e.data&&(o.value.image=e.image,o.value.imagePreview=e.image?`${v}${e.image}`:null,u.add({title:"Success",description:"Hero Banner updated successfully.",color:"success"}),console.log("Saved data:",e.data))}catch(t){console.error("Error saving Hero Banner:",t),t.response?.status===401&&(await c.logout(),S("/admin/login")),u.add({title:"error",description:"Failed to update hero banner",color:"error"})}finally{l.value=!1}},h=()=>{m.value.click()},y=t=>{const e=t.target.files[0];if(e){const s=new FileReader;s.onload=x=>{o.value={...o.value,image:e,imagePreview:x.target.result}},s.readAsDataURL(e)}},w=()=>{p()};return k(()=>{p()}),(t,e)=>(n(),i("div",null,[e[4]||(e[4]=a("div",{class:"flex justify-between items-center mb-6"},[a("h1",{class:"text-2xl font-bold text-gray-800"},"Hero Banner Management")],-1)),a("div",H,[a("form",{onSubmit:F(b,["prevent"]),class:"space-y-6"},[a("div",I,[a("div",null,[e[1]||(e[1]=a("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),C(a("textarea",{"onUpdate:modelValue":e[0]||(e[0]=s=>r(o).description=s),id:"description",rows:"3",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[P,r(o).description]])])]),a("div",null,[e[3]||(e[3]=a("label",{class:"block text-sm font-medium text-gray-700"}," Image",-1)),a("div",M,[r(o).image?(n(),i("img",{key:1,src:r(o).image,class:"h-32 w-auto object-cover rounded"},null,8,E)):(n(),i("span",D,[...e[2]||(e[2]=[a("svg",{class:"h-full w-full text-gray-300",fill:"currentColor",viewBox:"0 0 24 24"},[a("path",{d:"M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"})],-1)])])),a("button",{type:"button",onClick:h,class:"ml-5 bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Change "),a("input",{ref_key:"imageFileInput",ref:m,type:"file",class:"hidden",accept:"image/*",onChange:y},null,544)])]),a("div",T,[a("button",{type:"button",onClick:w,class:"mr-3 bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Reset "),a("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:r(l)},[r(l)?(n(),i("span",U,"Saving...")):(n(),i("span",z,"Save Changes"))],8,R)])],32)])]))}},J=A(V,[["__scopeId","data-v-efc68531"]]);export{J as default};
